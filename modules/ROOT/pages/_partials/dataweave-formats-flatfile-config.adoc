[[properties]]
== Configuration Properties

DataWeave supports the following configuration properties for this format.

[[reader_properties]]
=== Reader Properties

DataWeave accepts properties that provide instructions for reading input data in this format.

//NOTE: SOME VALUES HAVE TO BE PROVIDED MANUALLY, NOT AUTOGENERATED
[cols="1,1,1,3a", options="header"]
|===
| Parameter | Type | Default | Description
| `allowLenientWithBinaryNotEndElement` | `Boolean` | `false` |
When the schema contains elements of type Binary or Packed, the `lenient` option does not allow short records, regardless of the last element's
format type. When you set this property to `true`, the validation applies only to cases in which the record ends with type Binary or Packed.
| `enforceRequires` | `Boolean` | `false` | Error if required value missing.
  Valid values are `true` or `false`.
| `missingValues` | `String` | `nulls` for copybook schema, `spaces` otherwise | Fill character used to represent missing values. To activate a non-default setting, set the `useMissCharAsDefaultForFill` property to `true`, and use one of the following values to `missingValues`:

* `none`: Treat all data as actual values
* `spaces`: Interpret a field consisting of only spaces as a missing value
* `zeroes`: Interpret numeric fields consisting of only '0' characters and
character fields consisting of only spaces as missing values
* `nulls`: Interpret a field consisting only of 0 bytes as a missing value

|`notTruncateDependingOnSubjectNotPresent` |`Boolean`|`false`|Fills the entire group when the DEPENDING ON subject is not present. _Introduced in DataWeave 2.3 with the August 2021 release of Mule 4.3.0-20210622._
| `recordParsing` | `String` | `strict` |

Expected separation between lines/records:

* `strict`: Line break expected at exact end of each record.
* `lenient`: Line break used but records may be shorter or longer than schema specifies. Starting with the January 2023 patch update version 4.3.0-20230102 for DataWeave 2.3, payloads without line breaks no longer work when you use `lenient` as the `recordParsing` property; use `noTerminator`, instead.
* `noTerminator`: Records follow one another with no separation. Starting with the January 2023 patch update version 4.3.0-20221212 for DataWeave 2.3, use the `noTerminator` property when the data payloads have no line break character. 
* `singleRecord`: Entire input is a single record.

Note that schemas with type `Binary` or `Packed` don't allow for line break
detection, so setting `recordParsing` to `lenient` only allows long records
to be handled, not short ones. These schemas also currently only work with
certain single-byte character encodings
(so not with UTF-8 or any multibyte format).

| `schemaPath`  (Required) | `String` | `null` | Schema definition. Location in your local disk of the schema file used to parse your input.
| `segmentIdent` | `String` | `null` | Segment identifier in the schema for fixed width or copybook schemas (only needed when parsing a single segment/record definition and if the schema includes multiple segment definitions).
| `structureIdent` | `String` | `null` | Structure identifier in schema for flatfile schemas (only needed when parsing a structure definition, and if the schema includes multiple structure definitions)
| `truncateDependingOn` | `Boolean` | `false` | Truncate COBOL copybook DEPENDING ON values to the length used. Valid values are `true` or `false`.
| `useMissCharAsDefaultForFill`|`Boolean`| `false` |By default, the flat file reader and writer use spaces for missing characters and ignore the setting of the `missingValues` property. When you set this property to `true`, the reader honors the setting of the `missingValues` property.  _Introduced in DataWeave 2.3 (2.3.0-20210823) for the September 2021 release of Mule 4.3.0-20210823._ Valid values are `true` or `false`.
| `zonedDecimalStrict` | `Boolean` | `false` | Use the `strict` ASCII form of
sign encoding for COBOL copybook zoned decimal values.
Valid values are `true` or `false`.
|===

[[writer_properties]]
=== Writer Properties

DataWeave accepts properties that provide instructions for writing output data in this format.

[cols="1,1,1,3a", options="header"]
|===
| Parameter | Type | Default | Description
| `bufferSize` | `Number` | `8192` | Size of the buffer writer.
| `deferred` | `Boolean` | `false` | When set to `true`, DataWeave generates the output as a data stream, and the script's execution is deferred until it is consumed.
  Valid values are `true` or `false`.
| `encoding` | `String` | `null` | Encoding to be used by this writer,
such as `UTF-8`.
| `enforceRequires` | `Boolean` | `false` | Error if a required value is missing.
Valid values are `true` or `false`.
| `missingValues` | `String` | `NULLS` for copybook schema, `SPACES` otherwise | Fill character used to represent missing values. To activate a non-default setting, use `useMissCharAsDefaultForFill`, and use one of the following values to `missingValues`:

* `NONE`: Write nothing for missing values.
* `SPACES`: Fill the field with spaces.
* `ZEROES`: Fill numeric fields with `0` characters and character fields with space characters.
* `NULLS`: Fill the field with 0 bytes.

|`notTruncateDependingOnSubjectNotPresent` |`Boolean`|`false`|Fills the entire group when the DEPENDING ON subject is not present. _Introduced in DataWeave 2.3 with the August 2021 release of Mule 4.3.0-20210622._
| `recordTerminator` | `String` | System property `line.separator` | Record separator line break. Valid values:

* `lf`
* `cr`
* `crlf`
* `none`

Note that in Mule versions 4.0.4 and later, this is only used as a separator
when there are multiple records. Values translate directly to character codes
(`none` leaves no termination on each record).
| `retainEmptyStringFieldsOnParsing` | `false` | When set to `true`, this property makes the reader retain fields that lack values and set their values to an empty string. _Introduced in the January 2023 version of DataWeave 2.3 for Mule version 4.3.0-20221212._
| `schemaPath` (Required) | `String` | `null` | Schema definition. Path where the schema file
to be used is located.
| `segmentIdent` | `String` | `null` | Segment identifier in the schema for fixed width or copybook schemas (only needed when writing a single segment/record definition, and if the schema includes multiple segment definitions).
| `structureIdent` | `String` | `null` | Structure identifier in schema for flatfile schemas (only needed when writing a structure definition and if the schema includes multiple structure definitions)| `trimValues` | `Boolean` | `false` | Trim string values longer than the field length by truncating trailing characters. Valid values are `true` or `false`.
| `trimValues` | `Boolean` | `false` | Indicates whether trim values are longer than the field width. Valid Options are `true` or `false`.
| `truncateDependingOn` | `Boolean` | `false` | Truncate COBOL copybook DEPENDING ON values to the length used. Valid values are `true` or `false`.
| `useMissCharAsDefaultForFill`|`Boolean`| `false` |By default, the flat file reader and writer use spaces for missing characters and ignore the setting of the `missingValues` property. When you set this property to `true`, the writer honors the setting of the `missingValues` property.  _Introduced in DataWeave 2.3 (2.3.0-20210823) for the September 2021 release of Mule 4.3.0-20210823._
| `zonedDecimalStrict` | `Boolean` | `false` | Use the `strict` ASCII form of
sign encoding for COBOL copybook zoned decimal values. Valid values are `true` or
`false`.
|===
